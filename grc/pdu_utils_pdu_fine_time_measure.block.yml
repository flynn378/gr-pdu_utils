# auto-generated by grc.converter

id: pdu_utils_pdu_fine_time_measure
label: PDU Fine Time Measurement
category: '[Sandia]/PDU Utilities/'

parameters:
-   id: pre_burst_time
    label: Pre Burst time
    dtype: float
    default: 80e-6
-   id: post_burst_time
    label: Post Burst time
    dtype: float
    default: 80e-6
-   id: average_width
    label: Moving Average Width
    dtype: int
    default: '20'
-   id: buffer_percent
    label: Buffer Percent
    dtype: float
    default: '10'

inputs:
-   domain: message
    id: pdu_in
    optional: true

outputs:
-   domain: message
    id: pdu_out
    optional: true
asserts:
- ${ buffer_percent >= 0 }
- ${ buffer_percent < 100 }
- ${ average_width > 0 }
- ${ pre_burst_time > 0 }
- ${ post_burst_time > 0 }

templates:
    imports: import pdu_utils
    make: pdu_utils.pdu_fine_time_measure(${pre_burst_time}, ${post_burst_time}, ${average_width},
        ${buffer_percent})

documentation: |-
    Perform time domain fine burst start time estimate.  It considers the pre/post burst times to be noise and the rest of the burst to be signal.  The new start time is when a moving average goes above .5*(Signal + Noise).

    Pre/post burst time - Extra time pre/appended to a burst, that is presumed to be noise.
    Average Width - The number of samples used in a moving average to decide the start of burst.
    Buffer Percent - We don't want to include transitions in our Signal/Noise calculations.  Remove this percent of points from consideration. (0 - 100%)

file_format: 1
